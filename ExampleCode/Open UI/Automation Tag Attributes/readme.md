# Automation Tag Attributes

Custom content added to the Siebel UI programmatically cannot be automated (or indeed tracked for the purposes of UPT) unless automation tags are added to the DOM. This might happen if you implement a custom control using a PW, add HTML content in a PR, or leverage a 3rd party plugin, such as a timeline widget, to create content within the UI.

The required tags for automation are **ot**, **un**, and **rn**, though rather than add these directly, the best practice is to extract the names of these tags from constants provided in the framework, just incase the tags must be changes at a later date for any reason. In the simplest example, this is the method to create the required tags:

```
    autoOn = SiebelApp.S_App.IsAutoOn();
	if (autoOn) {
		var ATA={}; // add automation tag attributes
		ATA[consts.get("SWE_PROP_AUTOM_OT")] = '<object type>';
		ATA[consts.get("SWE_PROP_AUTOM_RN")] = '<repository name>';
		ATA[consts.get("SWE_PROP_AUTOM_UN")] = '<user name>';
		$('<selector>').attr(ATA);
	}
```
## Choosing values for _ot_, _un_, and _rn_

To choose good values for these attributes, you need to appreciate that the values are used in two ways. First they are used to record behaviour; for this purpose, any value will do. Secondly, they are used to create test automation scripts; here it's important to use an appropriate Object Type for your content. Note that, for an item to be considered as automatable, all three values must be populated.

### OT

In 17.0, the following mappings exist between Object Type values and Keyword Definitions (KWD). In order to record a sensible script which can be edited in a meaningful way, with available actions appropriate to the control type, you need to select one of the Object Types value above in order. A completely custom value will record OK, but will not result in a fully functional automation script.


| Valid Object Types | KWD Mapping |
| --- | --- |
| SelectRow | SelectRecordinListApplet |
| Mvg, PickEditField, JCurrencyCalcEditField | InvokeObject |
| drilldown, Link, SiebWebLink | ClickLink |
| JText, JCalculator, JTextArea, Pick, JCurrencyCalc, Mailto | InputValue |
| Button,AccordionTab | ClickButton |
| JComboBox, ComboBox | SelectPicklistValue |
| JCheckBox | SelectCheckBox |
| Accelerator | SendKeys |
| SiebScreen, SiebViewLink, SiebVisListItem | GoToView |
| SiebWebSitemapAnchor | GoToViewSitemap |
| SiebAppletMenuItem | InvokeAppletMenuItem |
| sortColumn | SortColumn |
| lockColumn, unlockColumn | LockColumn |
| SelectVisOT, SiebVisDropDown | SelectVisibilityFilterValue |
| JDateTimeZonePick, JDatePick, JDateTimePick | SetDateTime |
| JInkData | Draw |
| SiebToggle | SelectToggleValue |
| JRadioButton | SelectRadioButton |
| SiebApplicationMenuItem | InvokeMenuBarItem |
| DragSource | DragAndDrop |
| Hierarchy | HierarchicalList |
| File Upload, File | FileUpload |
| SiebPDQDropDown, SiebPDQListItem | SelectPDQValue |
| MultiSelect | MultiSelectRecordsinListApplet |
| threadbar | GoToThreadbarView |
| Tree | TreeExplorer |

You can check these mappings directly in your install under ```siebsrvr\JSON\AUTOMATION``` as the content may change in time.

### RN

Perhaps the most important value in test automation is the RN value, which is short for repository name. Clearly, when content is created from repository configuration, an appropriate name is selected, and uniqueness rules encoded into configuration ensure that RN is unique. For custom content, you need to ensure uniqueness. It's not vital that your RN value is unique across the entire UI however, it need only be unique within the DOM scope below the parent RN, which is likely to be the applet name which you are customizing.

You will want to ensure that there's no change of overlap between your custom content and content that is created automatically. As such, you might consider using a prefix infront of your RN values. For example, if you are creating a PR to create a timeline widget, you might choose a prefix for your RN values of ```_TimelinePR_```. This reduces the change of overlap with autogenerated content significantly. Note that, as scripts are ultimately processed in the database, you should consider that RN values have an effective maximum length equal to the maximum length of an applet control name; i.e. 75 characters.

### UN

Most of the time, it will be sufficient for you to set the same value of UN for RN. UN (or user name) is used in some edge cases where RN values may not be unique within the scope of the parent RN. If this also applies to your custom content for anyreason, you can use UN as a way to increase granularity further.

### Maintenance

You should also consider that other custom generated content might create tags with the same name under the same parentRN, and as such, you may want to make clear at the top of your code what naming convention you used. This would make auditing and maintenance simpler; e.g.

```
    var ATA_PRE = "_TimelinePR_"
```
With this done, you can re-use this when defining the attribute values; e.g.
```
	autoOn = SiebelApp.S_App.IsAutoOn();
	if (autoOn) {
		var ATA={}; // add automation tag attributes
		ATA[consts.get("SWE_PROP_AUTOM_OT")] = 'Button';
		ATA[consts.get("SWE_PROP_AUTOM_RN")] = ATA_PRE+'SetStartDate';
		ATA[consts.get("SWE_PROP_AUTOM_UN")] = ATA_PRE+'SetStartDate';
		$('[name="myLinkedInIcon"]').attr(ATA);
	}

```